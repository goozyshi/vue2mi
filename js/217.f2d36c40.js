"use strict";(self["webpackChunkvue2mi"]=self["webpackChunkvue2mi"]||[]).push([[217],{2802:function(t,e,s){s.d(e,{Z:function(){return n}});var i=function(){var t=this,e=t._self._c;return t.showModal?e("div",{staticClass:"dialog"},[e("div",{staticClass:"mask"}),e("div",{staticClass:"dialog-box"},[e("div",{staticClass:"dialog-header"},[e("span",[t._v(t._s(t.title))]),e("a",{staticClass:"icon-close",attrs:{href:"javascript: void(0);"},on:{click:function(e){return t.$emit("cancel")}}})]),e("div",{staticClass:"dialog-body"},[t._t("body")],2),e("div",{staticClass:"dialog-footer"},[1==t.btnType?e("a",{staticClass:"btn",attrs:{href:"javascript: void(0);"},on:{click:function(e){return t.$emit("submit")}}},[t._v(t._s(t.sureText))]):t._e(),2==t.btnType?e("a",{staticClass:"btn",attrs:{href:"javascript: void(0);"},on:{click:function(e){return t.$emit("cancel")}}},[t._v(t._s(t.cancelText))]):t._e(),3==t.btnType?e("div",{staticClass:"btn-group"},[e("a",{staticClass:"btn",attrs:{href:"javascript: void(0);"},on:{click:function(e){return t.$emit("submit")}}},[t._v(t._s(t.sureText))]),e("a",{staticClass:"btn btn-default",attrs:{href:"javascript: void(0);"},on:{click:function(e){return t.$emit("cancel")}}},[t._v(t._s(t.cancelText))])]):t._e()])])]):t._e()},a=[],r={name:"dialog-component",props:{modalType:{type:String,default:"form"},title:String,btnType:String,sureText:{type:String,default:"确定"},cancelText:{type:String,default:"取消"},showModal:Boolean}},c=r,l=s(2349),o=(0,l.Z)(c,i,a,!1,null,null,null),n=o.exports},7217:function(t,e,s){s.r(e),s.d(e,{default:function(){return v}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"order-confirm"},[e("order-header",{attrs:{title:"订单列表"}},[e("template",{slot:"tips"},[e("span",[t._v("请核实填写收货地址")])])],2),e("svg",{staticStyle:{position:"absolute",width:"0px",height:"0px",overflow:"hidden"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[e("defs",[e("symbol",{attrs:{id:"icon-add",viewBox:"0 0 31 32"}},[e("title",[t._v("add")]),e("path",{staticClass:"path1",attrs:{d:"M30.745 15.152h-14.382v-14.596c0-0.308-0.243-0.557-0.543-0.557s-0.543 0.249-0.543 0.557v14.596h-14.665c-0.3 0-0.543 0.249-0.543 0.557s0.243 0.557 0.543 0.557h14.665v15.177c0 0.307 0.243 0.557 0.543 0.557s0.543-0.249 0.543-0.557v-15.177h14.382c0.3 0 0.543-0.249 0.543-0.557s-0.243-0.557-0.543-0.557z"}})]),e("symbol",{attrs:{id:"icon-edit",viewBox:"0 0 32 32"}},[e("title",[t._v("edit")]),e("path",{staticClass:"path1",attrs:{d:"M28.287 8.51l-4.805-4.806 0.831-0.831c0.472-0.472 1.086-0.777 1.564-0.777 0.248 0 0.452 0.082 0.622 0.253l3.143 3.144c0.539 0.54 0.133 1.529-0.524 2.186l-0.831 0.831zM26.805 9.992l-1.138 1.138-4.805-4.806 1.138-1.138 4.805 4.806zM24.186 12.612l-14.758 14.762-4.805-4.806 14.758-14.762 4.805 4.806zM7.379 28.288l-4.892 1.224 1.223-4.894 3.669 3.67zM31.123 4.011l-3.143-3.144c-0.567-0.567-1.294-0.867-2.103-0.867-1.036 0-2.174 0.52-3.045 1.391l-20.429 20.436c-0.135 0.134-0.23 0.302-0.276 0.487l-2.095 8.385c-0.089 0.355 0.017 0.736 0.276 0.995 0.198 0.198 0.461 0.307 0.741 0.307 0.085 0 0.171-0.010 0.254-0.031l8.381-2.096c0.185-0.047 0.354-0.142 0.487-0.276l20.43-20.436c1.409-1.41 2.042-3.632 0.524-5.15v0z"}})]),e("symbol",{attrs:{id:"icon-del",viewBox:"0 0 32 32"}},[e("title",[t._v("delete")]),e("path",{staticClass:"path1",attrs:{d:"M11.355 4.129v-2.065h9.29v2.065h-9.29zM6.194 29.935v-23.742h19.613v23.742h-19.613zM30.968 4.129h-8.258v-3.097c0-0.569-0.463-1.032-1.032-1.032h-11.355c-0.569 0-1.032 0.463-1.032 1.032v3.097h-8.258c-0.569 0-1.032 0.463-1.032 1.032s0.463 1.032 1.032 1.032h3.097v24.774c0 0.569 0.463 1.032 1.032 1.032h21.677c0.569 0 1.032-0.463 1.032-1.032v-24.774h3.097c0.569 0 1.032-0.463 1.032-1.032s-0.463-1.032-1.032-1.032v0z"}}),e("path",{staticClass:"path2",attrs:{d:"M10.323 9.806c-0.569 0-1.032 0.463-1.032 1.032v14.452c0 0.569 0.463 1.032 1.032 1.032s1.032-0.463 1.032-1.032v-14.452c0-0.569-0.463-1.032-1.032-1.032z"}}),e("path",{staticClass:"path3",attrs:{d:"M16 9.806c-0.569 0-1.032 0.463-1.032 1.032v14.452c0 0.569 0.463 1.032 1.032 1.032s1.032-0.463 1.032-1.032v-14.452c0-0.569-0.463-1.032-1.032-1.032z"}}),e("path",{staticClass:"path4",attrs:{d:"M21.677 9.806c-0.569 0-1.032 0.463-1.032 1.032v14.452c0 0.569 0.463 1.032 1.032 1.032s1.032-0.463 1.032-1.032v-14.452c0-0.569-0.463-1.032-1.032-1.032z"}})])])]),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"container"},[e("div",{staticClass:"order-box"},[e("div",{staticClass:"item-address"},[e("h2",{staticClass:"addr-title"},[t._v("收货地址")]),e("div",{staticClass:"addr-list clearfix"},[t._l(t.list,(function(s,i){return e("div",{key:i,staticClass:"addr-info",class:{checked:i===t.checkIndex},on:{click:function(e){t.checkIndex=i}}},[e("h2",[t._v(t._s(s.receiverName))]),e("div",{staticClass:"phone"},[t._v(t._s(s.receiverMobile))]),e("div",{staticClass:"street"},[t._v(t._s(s.receiverProvince+" "+s.receiverCity+" "+s.receiverDistrict+" "+s.receiverAddress))]),e("div",{staticClass:"action"},[e("a",{staticClass:"fl",attrs:{href:"javascript: void(0);"},on:{click:function(e){return t.delAddress(s)}}},[e("svg",{staticClass:"icon icon-del"},[e("use",{attrs:{"xlink:href":"#icon-del"}})])]),e("a",{staticClass:"fr",attrs:{href:"javascript: void(0);"},on:{click:function(e){return t.editAddressModal(s)}}},[e("svg",{staticClass:"icon icon-edit"},[e("use",{attrs:{"xlink:href":"#icon-edit"}})])])])])})),e("div",{staticClass:"addr-add",on:{click:t.openAddressModal}},[e("div",{staticClass:"icon-add"}),e("div",[t._v("添加新地址")])])],2)]),e("div",{staticClass:"item-good"},[e("h2",[t._v("商品")]),e("ul",t._l(t.cartList,(function(s,i){return e("li",{key:i},[e("div",{staticClass:"good-name"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.productMainImage,expression:"item.productMainImage"}],attrs:{alt:""}}),e("span",[t._v(t._s(s.productName+" "+s.productSubtitle))])]),e("div",{staticClass:"good-price"},[t._v(t._s(s.productPrice)+"元x"+t._s(s.quantity))]),e("div",{staticClass:"good-total"},[t._v(t._s(s.productTotalPrice)+"元")])])})),0)]),t._m(0),t._m(1),e("div",{staticClass:"detail"},[e("div",{staticClass:"item"},[e("span",{staticClass:"item-name"},[t._v("商品件数：")]),e("span",{staticClass:"item-val"},[t._v(t._s(t.count)+"件")])]),e("div",{staticClass:"item"},[e("span",{staticClass:"item-name"},[t._v("商品总价：")]),e("span",{staticClass:"item-val"},[t._v(t._s(t.cartTotalPrice)+"元")])]),t._m(2),t._m(3),e("div",{staticClass:"item-total"},[e("span",{staticClass:"item-name"},[t._v("应付总额：")]),e("span",{staticClass:"item-val"},[t._v(t._s(t.cartTotalPrice)+"元")])])]),e("div",{staticClass:"btn-group"},[e("a",{staticClass:"btn btn-default btn-large",attrs:{href:"/cart"}},[t._v("返回购物车")]),e("a",{staticClass:"btn btn-large",attrs:{href:"javascript: void(0);"},on:{click:t.orderSubmit}},[t._v("去结算")])])])])]),e("modal",{attrs:{title:"新增确认",btnType:"1",showModal:t.showEditModal},on:{cancel:function(e){t.showEditModal=!1},submit:t.submitAddress}},[e("template",{slot:"body"},[e("div",{staticClass:"edit-wrap"},[e("div",{staticClass:"item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverName,expression:"checkedItem.receiverName"}],staticClass:"input",attrs:{type:"text",placeholder:"姓名"},domProps:{value:t.checkedItem.receiverName},on:{input:function(e){e.target.composing||t.$set(t.checkedItem,"receiverName",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverMobile,expression:"checkedItem.receiverMobile"}],staticClass:"input",attrs:{type:"text",placeholder:"手机号"},domProps:{value:t.checkedItem.receiverMobile},on:{input:function(e){e.target.composing||t.$set(t.checkedItem,"receiverMobile",e.target.value)}}})]),e("div",{staticClass:"item"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverProvince,expression:"checkedItem.receiverProvince"}],attrs:{name:"province"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.checkedItem,"receiverProvince",e.target.multiple?s:s[0])}}},[e("option",{attrs:{value:"广东"}},[t._v("广东")]),e("option",{attrs:{value:"上海"}},[t._v("上海")]),e("option",{attrs:{value:"浙江"}},[t._v("浙江")])]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverCity,expression:"checkedItem.receiverCity"}],attrs:{name:"city"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.checkedItem,"receiverCity",e.target.multiple?s:s[0])}}},[e("option",{attrs:{value:"深圳"}},[t._v("深圳")]),e("option",{attrs:{value:"广州"}},[t._v("广州")]),e("option",{attrs:{value:"东莞"}},[t._v("东莞")])]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverDistrict,expression:"checkedItem.receiverDistrict"}],attrs:{name:"district"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.checkedItem,"receiverDistrict",e.target.multiple?s:s[0])}}},[e("option",{attrs:{value:"南山区"}},[t._v("南山区")]),e("option",{attrs:{value:"宝安区"}},[t._v("宝安区")]),e("option",{attrs:{value:"龙华区"}},[t._v("龙华区")]),e("option",{attrs:{value:"龙岗区"}},[t._v("南山区")]),e("option",{attrs:{value:"光明区"}},[t._v("光明区")])])]),e("div",{staticClass:"item"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverAddress,expression:"checkedItem.receiverAddress"}],attrs:{name:"street"},domProps:{value:t.checkedItem.receiverAddress},on:{input:function(e){e.target.composing||t.$set(t.checkedItem,"receiverAddress",e.target.value)}}})]),e("div",{staticClass:"item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverZip,expression:"checkedItem.receiverZip"}],staticClass:"input",attrs:{type:"text",placeholder:"邮编"},domProps:{value:t.checkedItem.receiverZip},on:{input:function(e){e.target.composing||t.$set(t.checkedItem,"receiverZip",e.target.value)}}})])])])],2),e("modal",{attrs:{title:"删除确认",btnType:"1",showModal:t.showDelModal},on:{cancel:function(e){t.showDelModal=!1},submit:t.submitAddress}},[e("template",{slot:"body"},[e("p",[t._v("您确认要删除此地址吗？")])])],2)],1)},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"item-shipping"},[e("h2",[t._v("配送方式")]),e("span",[t._v("包邮")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item-invoice"},[e("h2",[t._v("发票")]),e("a",{attrs:{href:"javascript: void(0);"}},[t._v("电子发票")]),e("a",{attrs:{href:"javascript: void(0);"}},[t._v("个人")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item"},[e("span",{staticClass:"item-name"},[t._v("优惠活动：")]),e("span",{staticClass:"item-val"},[t._v("0元")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item"},[e("span",{staticClass:"item-name"},[t._v("运费：")]),e("span",{staticClass:"item-val"},[t._v("0元")])])}],r=(s(7883),s(1581)),c=s(2802),l={name:"order-confirm-view",components:{OrderHeader:r.Z,Modal:c.Z},data(){return{list:[],cartList:[],cartTotalPrice:0,count:0,checkedItem:{},userAction:"",showDelModal:!1,showEditModal:!1,checkIndex:0}},mounted(){this.getAddressList(),this.getCartList()},methods:{getAddressList(){this.axios.get("/shippings").then((t=>{this.list=t.list}))},openAddressModal(){this.userAction=0,this.checkedItem={},this.showEditModal=!0},editAddressModal(t){this.userAction=1,this.checkedItem=t,this.showEditModal=!0},delAddress(t){this.checkedItem=t,this.userAction=2,this.showDelModal=!0},submitAddress(){let t,e,{checkedItem:s,userAction:i}=this,a={};if(0==i?(t="post",e="/shippings"):1==i?(t="put",e=`/shippings/${s.id}`):(t="delete",e=`/shippings/${s.id}`),0==i||1==i){let{receiverName:t,receiverMobile:e,receiverProvince:i,receiverCity:r,receiverDistrict:c,receiverAddress:l,receiverZip:o}=s,n="";if(t?e&&/\d{11}/.test(e)?i?r?l&&c?/\d{6}/.test(o)||(n="请输入六位邮编"):n="请输入收货地址":n="请选择对应的城市":n="请选择省份":n="请输入正确格式的手机号":n="请输入收货人名称",n)return void this.$message.error(n);a={receiverName:t,receiverMobile:e,receiverProvince:i,receiverCity:r,receiverDistrict:c,receiverAddress:l,receiverZip:o}}this.axios[t](e,a).then((()=>{this.closeModal(),this.getAddressList(),this.$message.success("操作成功")}))},closeModal(){this.checkedItem={},this.userAction="",this.showDelModal=!1,this.showEditModal=!1},getCartList(){this.axios.get("/carts").then((t=>{let e=t.cartProductVoList;this.cartTotalPrice=t.cartTotalPrice,this.cartList=e.filter((t=>t.productSelected)),this.cartList.map((t=>{this.count+=t.quantity}))}))},orderSubmit(){let t=this.list[this.checkIndex];t?this.axios.post("/orders",{shippingId:t.id}).then((t=>{this.$router.push({path:"/order/pay",query:{orderNo:t.orderNo}})})):this.$message.error("请选择一个收货地址")}}},o=l,n=s(2349),d=(0,n.Z)(o,i,a,!1,null,null,null),v=d.exports}}]);
//# sourceMappingURL=217.f2d36c40.js.map